<!DOCTYPE html>
<head>
  <meta charset = "UTF-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    $(function() {
  const videoElement = $('#video1').get(0);

  if (!videoElement) {
    console.error("Video element not found");
    return;
  }

  const videoStart = $('#video1container').offset().top; // 影片division的頂部位置
  const videoEnd = videoStart + $('#video1container').height(); // 影片division的底部位置
  const maxScroll = $(document).height() - $(window).height();

  $(window).scroll(function() {
    const currentScrollPosition = $(document).scrollTop();

    if (currentScrollPosition >= videoStart && currentScrollPosition <= videoEnd) {
      // 影片division在畫面中
      if (videoElement.paused) {
        videoElement.play();
      }
    } else {
      // 影片division不在畫面中
      if (!videoElement.paused) {
        videoElement.pause();
      }
    }

    if (videoElement.duration) {
      videoElement.currentTime = videoElement.duration * (currentScrollPosition - videoStart) / (videoEnd - videoStart);
    } else {
      console.warn("Video duration is not available");
    }
  });
});

$(function() {
  const videoElement = $('#video2').get(0);

  if (!videoElement) {
    console.error("Video element not found");
    return;
  }

  const videoStart = $('#video2container').offset().top; // 影片division的頂部位置
  const videoEnd = videoStart + $('#video2container').height(); // 影片division的底部位置
  const maxScroll = $(document).height() - $(window).height();

  $(window).scroll(function() {
    const currentScrollPosition = $(document).scrollTop();

    if (currentScrollPosition >= videoStart && currentScrollPosition <= videoEnd) {
      // 影片division在畫面中
      if (videoElement.paused) {
        videoElement.play();
      }
    } else {
      // 影片division不在畫面中
      if (!videoElement.paused) {
        videoElement.pause();
      }
    }

    if (videoElement.duration) {
      videoElement.currentTime = videoElement.duration * (currentScrollPosition - videoStart) / (videoEnd - videoStart);
    } else {
      console.warn("Video duration is not available");
    }
  });
});
  </script>
</head>

<body>
  <div style="height:200vh; background-color:black;">
    <h1 style = "color: aliceblue;">Leading Section</h1>
  </div>
  
    <div id = "video1container" style="height:600vh;">
      <div class="sticky-top">
        <video id="video1" src="https://web.cw.com.tw/climate-2020/landing/cover.mp4" style="width:100vw"></video>
      </div>
    </div>
    
    <div style="height:200vh;background:grey;">
      <h1 style = "color: aliceblue;">Middle Section</h1>
    </div>
    
    <div style="height:600vh">
      <div id = video2container class="sticky-top">
        <video id="video2" src="https://web.cw.com.tw/climate-2020/hsinchu-water/cover.mp4" style="width:100vw"></video>
      </div>
    </div>
    <div style="height:100vh;background:grey;">
      <h1 style = "color: aliceblue;">Ending Section</h1>
    </div> 
</body>